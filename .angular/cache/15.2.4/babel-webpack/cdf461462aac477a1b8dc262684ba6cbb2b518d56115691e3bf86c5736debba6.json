{"ast":null,"code":"import { timeout } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/service/api-service.service\";\nimport * as i2 from \"src/app/service/arduino.service\";\nimport * as i3 from \"src/app/service/token-service.service\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/common\";\nfunction ControleComponent_img_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 13);\n  }\n}\nfunction ControleComponent_img_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 14);\n  }\n}\nfunction ControleComponent_img_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 15);\n  }\n}\nfunction ControleComponent_img_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 16);\n  }\n}\nconst _c0 = function (a0, a1) {\n  return {\n    \"hide\": a0,\n    \"show\": a1\n  };\n};\nexport class ControleComponent {\n  constructor(apiService, arduinoService, tokenService, formBuilder) {\n    this.apiService = apiService;\n    this.arduinoService = arduinoService;\n    this.tokenService = tokenService;\n    this.formBuilder = formBuilder;\n    this.ip = \"\";\n  }\n  ngAfterViewInit() {\n    this.recarregarInfos();\n  }\n  ngOnInit() {\n    this.formIp = this.formBuilder.group({\n      ip: ['']\n    });\n    this.formToken = this.formBuilder.group({\n      token: ['']\n    });\n  }\n  set apiOnline(value) {\n    this._apiOnline = value;\n    if (this._apiOnline) {\n      this.recarregarInfos();\n    }\n  }\n  restartApi() {\n    this.apiService.restart().subscribe();\n  }\n  recarregarInfos() {\n    this.apiService.getToken().subscribe(tokenResponse => {\n      this.formToken.setValue({\n        token: tokenResponse.token\n      });\n    });\n    this.apiService.getIp().subscribe(ipResponse => {\n      this.formIp.setValue({\n        ip: ipResponse.ip\n      });\n      this.validaIp();\n      //this.validaToken();\n    });\n  }\n\n  validaIp() {\n    this.formIp.controls['ip'].setErrors({\n      'ipInvalid': true\n    });\n    this.arduinoService.getIpValido(this.formIp.controls['ip'].value).pipe(timeout(10000)).subscribe({\n      complete: () => {\n        this.formIp.controls['ip'].setErrors({\n          'ipInvalid': false\n        });\n      },\n      error: () => {\n        this.formIp.controls['ip'].setErrors({\n          'ipInvalid': true\n        });\n      }\n    });\n  }\n  validaToken() {\n    this.formToken.controls['token'].setErrors({\n      'tokenInvalid': true\n    });\n    this.tokenService.getValidacaoToken(this.formToken.controls['token'].value).pipe(timeout(5000)).subscribe({\n      complete: () => {\n        this.formToken.controls['token'].setErrors({\n          'tokenInvalid': false\n        });\n      },\n      error: () => {\n        this.formToken.controls['token'].setErrors({\n          'tokenInvalid': true\n        });\n      }\n    });\n  }\n  salvar() {\n    if (!this.formIp.get('ip')?.errors?.['ipInvalid']) {\n      this.apiService.setIp({\n        \"ip\": this.formIp.controls['ip'].value\n      }).subscribe();\n    }\n    if (!this.formToken.get('token')?.valid) {\n      this.apiService.setToken({\n        \"token\": this.formToken.controls['token'].value\n      }).subscribe();\n    }\n  }\n}\nControleComponent.ɵfac = function ControleComponent_Factory(t) {\n  return new (t || ControleComponent)(i0.ɵɵdirectiveInject(i1.ApiServiceService), i0.ɵɵdirectiveInject(i2.ArduinoService), i0.ɵɵdirectiveInject(i3.TokenServiceService), i0.ɵɵdirectiveInject(i4.FormBuilder));\n};\nControleComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ControleComponent,\n  selectors: [[\"app-controle\"]],\n  inputs: {\n    apiOnline: \"apiOnline\"\n  },\n  decls: 18,\n  vars: 10,\n  consts: [[1, \"container\", 3, \"ngClass\"], [1, \"form\"], [2, \"display\", \"flex\", 3, \"formGroup\"], [\"type\", \"text\", \"placeholder\", \"IP do arduino\", \"id\", \"ip\", \"name\", \"ip\", \"formControlName\", \"ip\", 3, \"input\"], [\"src\", \"../../../assets/error.png\", \"class\", \"img-validacao-ip\", 4, \"ngIf\"], [\"src\", \"../../../assets/sucesso.png\", \"class\", \"img-validacao-ip\", 4, \"ngIf\"], [\"type\", \"text\", \"placeholder\", \"Token do Bot\", \"id\", \"token\", \"name\", \"token\", \"formControlName\", \"token\", 3, \"input\"], [\"src\", \"../../../assets/error.png\", \"class\", \"img-validacao-token\", 4, \"ngIf\"], [\"src\", \"../../../assets/sucesso.png\", \"class\", \"img-validacao-token\", 4, \"ngIf\"], [1, \"botao\"], [\"type\", \"reset\", 1, \"recarregar\", 3, \"click\"], [\"type\", \"reset\", 1, \"redefinir\", 3, \"click\"], [\"type\", \"reset\", 1, \"resetar\", 3, \"click\"], [\"src\", \"../../../assets/error.png\", 1, \"img-validacao-ip\"], [\"src\", \"../../../assets/sucesso.png\", 1, \"img-validacao-ip\"], [\"src\", \"../../../assets/error.png\", 1, \"img-validacao-token\"], [\"src\", \"../../../assets/sucesso.png\", 1, \"img-validacao-token\"]],\n  template: function ControleComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"body\")(1, \"div\", 0)(2, \"form\", 1)(3, \"form\", 2)(4, \"input\", 3);\n      i0.ɵɵlistener(\"input\", function ControleComponent_Template_input_input_4_listener() {\n        return ctx.validaIp();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(5, ControleComponent_img_5_Template, 1, 0, \"img\", 4);\n      i0.ɵɵtemplate(6, ControleComponent_img_6_Template, 1, 0, \"img\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"form\", 2)(8, \"input\", 6);\n      i0.ɵɵlistener(\"input\", function ControleComponent_Template_input_input_8_listener() {\n        return ctx.validaToken();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(9, ControleComponent_img_9_Template, 1, 0, \"img\", 7);\n      i0.ɵɵtemplate(10, ControleComponent_img_10_Template, 1, 0, \"img\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"div\", 9)(12, \"button\", 10);\n      i0.ɵɵlistener(\"click\", function ControleComponent_Template_button_click_12_listener() {\n        return ctx.recarregarInfos();\n      });\n      i0.ɵɵtext(13, \"Recarregar\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"button\", 11);\n      i0.ɵɵlistener(\"click\", function ControleComponent_Template_button_click_14_listener() {\n        return ctx.salvar();\n      });\n      i0.ɵɵtext(15, \"Salvar\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"button\", 12);\n      i0.ɵɵlistener(\"click\", function ControleComponent_Template_button_click_16_listener() {\n        return ctx.restartApi();\n      });\n      i0.ɵɵtext(17, \"Resetar API\");\n      i0.ɵɵelementEnd()()()()();\n    }\n    if (rf & 2) {\n      let tmp_2_0;\n      let tmp_3_0;\n      let tmp_5_0;\n      let tmp_6_0;\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(7, _c0, !ctx._apiOnline, ctx._apiOnline));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"formGroup\", ctx.formIp);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", (tmp_2_0 = ctx.formIp.get(\"ip\")) == null ? null : tmp_2_0.errors == null ? null : tmp_2_0.errors[\"ipInvalid\"]);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !((tmp_3_0 = ctx.formIp.get(\"ip\")) == null ? null : tmp_3_0.errors == null ? null : tmp_3_0.errors[\"ipInvalid\"]));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.formToken);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", (tmp_5_0 = ctx.formToken.get(\"token\")) == null ? null : tmp_5_0.errors == null ? null : tmp_5_0.errors[\"tokenInvalid\"]);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !((tmp_6_0 = ctx.formToken.get(\"token\")) == null ? null : tmp_6_0.errors == null ? null : tmp_6_0.errors[\"tokenInvalid\"]));\n    }\n  },\n  dependencies: [i5.NgClass, i5.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.NgForm, i4.FormGroupDirective, i4.FormControlName],\n  styles: [\"body[_ngcontent-%COMP%] {\\r\\n    background-color: #fff;\\r\\n}\\r\\n\\r\\n.show[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n}\\r\\n\\r\\n.hide[_ngcontent-%COMP%] {\\r\\n    display: none;\\r\\n}\\r\\n\\r\\n.mensagem__erro[_ngcontent-%COMP%] {\\r\\n    font-size: 12px;\\r\\n    margin-left: 5px;\\r\\n    color: red;\\r\\n    margin-top: -10px;\\r\\n    margin-bottom: 20px;\\r\\n}\\r\\n\\r\\n.img-validacao-ip[_ngcontent-%COMP%] {\\r\\n    width: 27px;\\r\\n    height: 27px;\\r\\n    margin-left: 10px;\\r\\n}\\r\\n\\r\\n.img-validacao-token[_ngcontent-%COMP%] {\\r\\n    margin-left: 10px;\\r\\n    width: 27px;\\r\\n    height: 27px;\\r\\n}\\r\\n\\r\\n.container[_ngcontent-%COMP%] {\\r\\n    justify-content: space-around;\\r\\n    align-items: center;\\r\\n    margin-top: 5px;\\r\\n}\\r\\n  \\r\\n.form[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n    align-items: stretch;\\r\\n    padding: 20px;\\r\\n    background-color: rgb(199, 192, 192);\\r\\n    border: 2px solid gray;\\r\\n    border-radius: 12px;\\r\\n    max-width: 90%;\\r\\n    width: 65%;\\r\\n    margin-top: 75px;\\r\\n\\tbox-shadow: 4px 4px 4px rgba(50, 50, 50, 0.77);\\r\\n}\\r\\n  \\r\\ninput[type=\\\"text\\\"][_ngcontent-%COMP%] {\\r\\n    margin-left: -5px;\\r\\n    width: 100%;\\r\\n    padding: 0.5em;\\r\\n    margin-bottom: 1em;\\r\\n    border: 1px solid #ccc;\\r\\n    border-radius: 15px;\\r\\n    color: #686868;\\r\\n}\\r\\n  \\r\\n.botao[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    justify-content: center;\\r\\n    margin-top: 1em;\\r\\n    flex-wrap: wrap\\r\\n}\\r\\n  \\r\\n.recarregar[_ngcontent-%COMP%], .redefinir[_ngcontent-%COMP%], .resetar[_ngcontent-%COMP%] {\\r\\n    padding: 8px 16px;\\r\\n    margin: 10px 10px;\\r\\n    color: #fff;\\r\\n    cursor: pointer;\\r\\n    background-color: #5958F9;\\r\\n    border: 1.5px solid rgba(0, 0, 0, 0.74);\\r\\n    border-radius: 12px;\\r\\n    transition: all 0.5s ease;\\r\\n}\\r\\n\\r\\n.redefinir[_ngcontent-%COMP%]:hover, .resetar[_ngcontent-%COMP%]:hover, .recarregar[_ngcontent-%COMP%]:hover{\\r\\n    transform: scale(1.2);\\r\\n}\\r\\n\\r\\n.redefinir[_ngcontent-%COMP%]:active, .resetar[_ngcontent-%COMP%]:active, .recarregar[_ngcontent-%COMP%]:active{\\r\\n    transform: scale(0.9);\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50ZXMvY29udHJvbGUvY29udHJvbGUuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLHNCQUFzQjtBQUMxQjs7QUFFQTtJQUNJLGFBQWE7QUFDakI7O0FBRUE7SUFDSSxhQUFhO0FBQ2pCOztBQUVBO0lBQ0ksZUFBZTtJQUNmLGdCQUFnQjtJQUNoQixVQUFVO0lBQ1YsaUJBQWlCO0lBQ2pCLG1CQUFtQjtBQUN2Qjs7QUFFQTtJQUNJLFdBQVc7SUFDWCxZQUFZO0lBQ1osaUJBQWlCO0FBQ3JCOztBQUVBO0lBQ0ksaUJBQWlCO0lBQ2pCLFdBQVc7SUFDWCxZQUFZO0FBQ2hCOztBQUVBO0lBQ0ksNkJBQTZCO0lBQzdCLG1CQUFtQjtJQUNuQixlQUFlO0FBQ25COztBQUVBO0lBQ0ksYUFBYTtJQUNiLHNCQUFzQjtJQUN0QixvQkFBb0I7SUFDcEIsYUFBYTtJQUNiLG9DQUFvQztJQUNwQyxzQkFBc0I7SUFDdEIsbUJBQW1CO0lBQ25CLGNBQWM7SUFDZCxVQUFVO0lBQ1YsZ0JBQWdCO0NBR25CLDhDQUE4QztBQUMvQzs7QUFFQTtJQUNJLGlCQUFpQjtJQUNqQixXQUFXO0lBQ1gsY0FBYztJQUNkLGtCQUFrQjtJQUNsQixzQkFBc0I7SUFDdEIsbUJBQW1CO0lBQ25CLGNBQWM7QUFDbEI7O0FBRUE7SUFDSSxhQUFhO0lBQ2IsdUJBQXVCO0lBQ3ZCLGVBQWU7SUFDZjtBQUNKOztBQUVBO0lBQ0ksaUJBQWlCO0lBQ2pCLGlCQUFpQjtJQUNqQixXQUFXO0lBQ1gsZUFBZTtJQUNmLHlCQUF5QjtJQUN6Qix1Q0FBdUM7SUFDdkMsbUJBQW1CO0lBQ25CLHlCQUF5QjtBQUM3Qjs7QUFFQTtJQUNJLHFCQUFxQjtBQUN6Qjs7QUFFQTtJQUNJLHFCQUFxQjtBQUN6QiIsInNvdXJjZXNDb250ZW50IjpbImJvZHkge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcclxufVxyXG5cclxuLnNob3cge1xyXG4gICAgZGlzcGxheTogZmxleDtcclxufVxyXG5cclxuLmhpZGUge1xyXG4gICAgZGlzcGxheTogbm9uZTtcclxufVxyXG5cclxuLm1lbnNhZ2VtX19lcnJvIHtcclxuICAgIGZvbnQtc2l6ZTogMTJweDtcclxuICAgIG1hcmdpbi1sZWZ0OiA1cHg7XHJcbiAgICBjb2xvcjogcmVkO1xyXG4gICAgbWFyZ2luLXRvcDogLTEwcHg7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xyXG59XHJcblxyXG4uaW1nLXZhbGlkYWNhby1pcCB7XHJcbiAgICB3aWR0aDogMjdweDtcclxuICAgIGhlaWdodDogMjdweDtcclxuICAgIG1hcmdpbi1sZWZ0OiAxMHB4O1xyXG59XHJcblxyXG4uaW1nLXZhbGlkYWNhby10b2tlbiB7XHJcbiAgICBtYXJnaW4tbGVmdDogMTBweDtcclxuICAgIHdpZHRoOiAyN3B4O1xyXG4gICAgaGVpZ2h0OiAyN3B4O1xyXG59XHJcblxyXG4uY29udGFpbmVyIHtcclxuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYXJvdW5kO1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgIG1hcmdpbi10b3A6IDVweDtcclxufVxyXG4gIFxyXG4uZm9ybSB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICAgIGFsaWduLWl0ZW1zOiBzdHJldGNoO1xyXG4gICAgcGFkZGluZzogMjBweDtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYigxOTksIDE5MiwgMTkyKTtcclxuICAgIGJvcmRlcjogMnB4IHNvbGlkIGdyYXk7XHJcbiAgICBib3JkZXItcmFkaXVzOiAxMnB4O1xyXG4gICAgbWF4LXdpZHRoOiA5MCU7XHJcbiAgICB3aWR0aDogNjUlO1xyXG4gICAgbWFyZ2luLXRvcDogNzVweDtcclxuICAgIC13ZWJraXQtYm94LXNoYWRvdzogNHB4IDRweCA0cHggcmdiYSg1MCwgNTAsIDUwLCAwLjc3KTtcclxuXHQtbW96LWJveC1zaGFkb3c6IDRweCA0cHggNHB4IHJnYmEoNTAsIDUwLCA1MCwgMC43Nyk7XHJcblx0Ym94LXNoYWRvdzogNHB4IDRweCA0cHggcmdiYSg1MCwgNTAsIDUwLCAwLjc3KTtcclxufVxyXG4gIFxyXG5pbnB1dFt0eXBlPVwidGV4dFwiXSB7XHJcbiAgICBtYXJnaW4tbGVmdDogLTVweDtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgcGFkZGluZzogMC41ZW07XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxZW07XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xyXG4gICAgYm9yZGVyLXJhZGl1czogMTVweDtcclxuICAgIGNvbG9yOiAjNjg2ODY4O1xyXG59XHJcbiAgXHJcbi5ib3RhbyB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgICBtYXJnaW4tdG9wOiAxZW07XHJcbiAgICBmbGV4LXdyYXA6IHdyYXBcclxufVxyXG4gIFxyXG4ucmVjYXJyZWdhciwgLnJlZGVmaW5pciwgLnJlc2V0YXIge1xyXG4gICAgcGFkZGluZzogOHB4IDE2cHg7XHJcbiAgICBtYXJnaW46IDEwcHggMTBweDtcclxuICAgIGNvbG9yOiAjZmZmO1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzU5NThGOTtcclxuICAgIGJvcmRlcjogMS41cHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjc0KTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XHJcbiAgICB0cmFuc2l0aW9uOiBhbGwgMC41cyBlYXNlO1xyXG59XHJcblxyXG4ucmVkZWZpbmlyOmhvdmVyLCAucmVzZXRhcjpob3ZlciwgLnJlY2FycmVnYXI6aG92ZXJ7XHJcbiAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMik7XHJcbn1cclxuXHJcbi5yZWRlZmluaXI6YWN0aXZlLCAucmVzZXRhcjphY3RpdmUsIC5yZWNhcnJlZ2FyOmFjdGl2ZXtcclxuICAgIHRyYW5zZm9ybTogc2NhbGUoMC45KTtcclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["timeout","i0","ControleComponent","constructor","apiService","arduinoService","tokenService","formBuilder","ngAfterViewInit","recarregarInfos","ngOnInit","formIp","group","ip","formToken","token","apiOnline","value","_apiOnline","restartApi","restart","subscribe","getToken","tokenResponse","setValue","getIp","ipResponse","validaIp","controls","setErrors","getIpValido","pipe","complete","error","validaToken","getValidacaoToken","salvar","get","errors","setIp","valid","setToken","selectors","inputs","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\git\\front api telegram\\APITelegramFront\\src\\app\\componentes\\controle\\controle.component.ts","C:\\git\\front api telegram\\APITelegramFront\\src\\app\\componentes\\controle\\controle.component.html"],"sourcesContent":["import { AfterViewInit, Component, Input, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { ApiServiceService } from 'src/app/service/api-service.service';\r\nimport { Token } from '../token';\r\nimport { Ip } from '../ip';\r\nimport { ArduinoService } from 'src/app/service/arduino.service';\r\nimport { timeout } from 'rxjs';\r\nimport { TokenServiceService } from 'src/app/service/token-service.service';\r\n\r\n@Component({\r\n  selector: 'app-controle',\r\n  templateUrl: './controle.component.html',\r\n  styleUrls: ['./controle.component.css']\r\n})\r\nexport class ControleComponent implements OnInit, AfterViewInit {\r\n\r\n  _apiOnline!: boolean;\r\n  formIp!: FormGroup;\r\n  formToken!: FormGroup;\r\n\r\n  ip: string = \"\";\r\n\r\n  constructor(private apiService: ApiServiceService,\r\n    private arduinoService: ArduinoService,\r\n    private tokenService: TokenServiceService,\r\n    private formBuilder: FormBuilder) { }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.recarregarInfos();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.formIp = this.formBuilder.group({\r\n      ip: ['']\r\n    })\r\n\r\n    this.formToken = this.formBuilder.group({\r\n      token: ['']\r\n    })\r\n  }\r\n\r\n\r\n  @Input() set apiOnline(value: boolean) {\r\n    this._apiOnline = value;\r\n\r\n    if (this._apiOnline) {\r\n      this.recarregarInfos();\r\n    }\r\n  }\r\n\r\n  public restartApi() {\r\n    this.apiService.restart().subscribe();\r\n  }\r\n\r\n  recarregarInfos() {\r\n    this.apiService.getToken().subscribe((tokenResponse: Token) => {\r\n      this.formToken.setValue({\r\n        token: tokenResponse.token\r\n      })\r\n    })\r\n\r\n    this.apiService.getIp().subscribe((ipResponse: Ip) => {\r\n      this.formIp.setValue({\r\n        ip: ipResponse.ip\r\n      })\r\n\r\n      this.validaIp();\r\n      //this.validaToken();\r\n    }\r\n    )\r\n  }\r\n\r\n  validaIp() {\r\n    this.formIp.controls['ip'].setErrors({ 'ipInvalid': true })\r\n    this.arduinoService.getIpValido(this.formIp.controls['ip'].value\r\n    ).pipe(timeout(10000)).subscribe({\r\n      complete: () => {\r\n        this.formIp.controls['ip'].setErrors({ 'ipInvalid': false })\r\n      },\r\n      error: () => {\r\n        this.formIp.controls['ip'].setErrors({ 'ipInvalid': true })\r\n      }\r\n    })\r\n  }\r\n\r\n  validaToken() {\r\n    this.formToken.controls['token'].setErrors({ 'tokenInvalid': true })\r\n\r\n    this.tokenService.getValidacaoToken(this.formToken.controls['token'].value\r\n    ).pipe(timeout(5000)).subscribe({\r\n      complete: () => {\r\n        this.formToken.controls['token'].setErrors({ 'tokenInvalid': false })\r\n      },\r\n      error: () => {\r\n        this.formToken.controls['token'].setErrors({ 'tokenInvalid': true })\r\n      }\r\n    })\r\n  }\r\n\r\n  salvar() {\r\n    if (!this.formIp.get('ip')?.errors?.['ipInvalid']) {\r\n      this.apiService.setIp({\r\n        \"ip\": this.formIp.controls['ip'].value\r\n      }).subscribe();\r\n    }\r\n\r\n    if (!this.formToken.get('token')?.valid) {\r\n      this.apiService.setToken({\r\n        \"token\": this.formToken.controls['token'].value\r\n      }).subscribe();\r\n    }\r\n  }\r\n}\r\n","<body>\r\n    <div [ngClass]=\"{'hide':!_apiOnline, 'show':_apiOnline}\" class=\"container\">\r\n        <form class=\"form\">\r\n            <form [formGroup]=\"formIp\" style=\"display: flex;\">\r\n                <input (input)=\"validaIp()\" type=\"text\" placeholder=\"IP do arduino\" id=\"ip\" name=\"ip\" formControlName=\"ip\">\r\n                <img src=\"../../../assets/error.png\" class=\"img-validacao-ip\" *ngIf=\"formIp.get('ip')?.errors?.['ipInvalid']\">\r\n                <img src=\"../../../assets/sucesso.png\" class=\"img-validacao-ip\" *ngIf=\"!formIp.get('ip')?.errors?.['ipInvalid']\">\r\n            </form>\r\n            <form [formGroup]=\"formToken\" style=\"display: flex;\">\r\n                <input type=\"text\" (input)=\"validaToken()\" placeholder=\"Token do Bot\" id=\"token\" name=\"token\" formControlName=\"token\">\r\n                <img src=\"../../../assets/error.png\" class=\"img-validacao-token\" *ngIf=\"formToken.get('token')?.errors?.['tokenInvalid']\">\r\n                <img src=\"../../../assets/sucesso.png\" class=\"img-validacao-token\" *ngIf=\"!formToken.get('token')?.errors?.['tokenInvalid']\">\r\n            </form>\r\n            <div class=\"botao\">\r\n                <button (click)=\"recarregarInfos()\" type=\"reset\" class=\"recarregar\">Recarregar</button>\r\n                <button (click)=\"salvar()\" type=\"reset\" class=\"redefinir\">Salvar</button>\r\n                <button (click)=\"restartApi()\" type=\"reset\" class=\"resetar\">Resetar API</button>\r\n            </div>\r\n        </form>\r\n    </div>\r\n</body>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}