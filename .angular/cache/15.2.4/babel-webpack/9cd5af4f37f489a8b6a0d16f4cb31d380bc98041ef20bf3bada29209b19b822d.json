{"ast":null,"code":"import { timeout } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/service/api-service.service\";\nimport * as i2 from \"src/app/service/arduino.service\";\nimport * as i3 from \"src/app/service/token-service.service\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/common\";\nfunction ControleComponent_img_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 14);\n  }\n}\nfunction ControleComponent_img_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 15);\n  }\n}\nfunction ControleComponent_img_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 16);\n  }\n}\nfunction ControleComponent_img_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 17);\n  }\n}\nconst _c0 = function (a0, a1) {\n  return {\n    \"hide\": a0,\n    \"show\": a1\n  };\n};\nexport class ControleComponent {\n  constructor(apiService, arduinoService, tokenService, formBuilder) {\n    this.apiService = apiService;\n    this.arduinoService = arduinoService;\n    this.tokenService = tokenService;\n    this.formBuilder = formBuilder;\n    this.ip = \"\";\n  }\n  ngAfterViewInit() {\n    this.recarregarInfos();\n  }\n  ngOnInit() {\n    this.formIp = this.formBuilder.group({\n      ip: ['']\n    });\n    this.formToken = this.formBuilder.group({\n      token: ['']\n    });\n  }\n  set apiOnline(value) {\n    this._apiOnline = value;\n    if (this._apiOnline) {\n      this.recarregarInfos();\n    }\n  }\n  restartApi() {\n    this.apiService.restart().subscribe();\n  }\n  recarregarInfos() {\n    this.apiService.getToken().subscribe(tokenResponse => {\n      this.formToken.setValue({\n        token: tokenResponse.token\n      });\n    });\n    this.apiService.getIp().subscribe(ipResponse => {\n      this.formIp.setValue({\n        ip: ipResponse.ip\n      });\n      this.validaIp();\n      //this.validaToken();\n    });\n  }\n\n  validaIp() {\n    this.formIp.controls['ip'].setErrors({\n      'ipInvalid': true\n    });\n    this.arduinoService.getIpValido(this.formIp.controls['ip'].value).pipe(timeout(100)).subscribe({\n      complete: () => {\n        this.formIp.controls['ip'].setErrors({\n          'ipInvalid': false\n        });\n      },\n      error: () => {\n        this.formIp.controls['ip'].setErrors({\n          'ipInvalid': true\n        });\n      }\n    });\n  }\n  validaToken() {\n    this.formToken.controls['token'].setErrors({\n      'tokenInvalid': true\n    });\n    this.tokenService.getValidacaoToken(this.formToken.controls['token'].value).pipe(timeout(5000)).subscribe({\n      complete: () => {\n        this.formToken.controls['token'].setErrors({\n          'tokenInvalid': false\n        });\n      },\n      error: () => {\n        this.formToken.controls['token'].setErrors({\n          'tokenInvalid': true\n        });\n      }\n    });\n  }\n  salvar() {\n    if (!this.formIp.get('ip')?.errors?.['ipInvalid']) {\n      this.apiService.setIp({\n        \"ip\": this.formIp.controls['ip'].value\n      }).subscribe();\n    }\n    if (!this.formToken.get('token')?.valid) {\n      this.apiService.setToken({\n        \"token\": this.formToken.controls['token'].value\n      }).subscribe();\n    }\n  }\n}\nControleComponent.ɵfac = function ControleComponent_Factory(t) {\n  return new (t || ControleComponent)(i0.ɵɵdirectiveInject(i1.ApiServiceService), i0.ɵɵdirectiveInject(i2.ArduinoService), i0.ɵɵdirectiveInject(i3.TokenServiceService), i0.ɵɵdirectiveInject(i4.FormBuilder));\n};\nControleComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ControleComponent,\n  selectors: [[\"app-controle\"]],\n  inputs: {\n    apiOnline: \"apiOnline\"\n  },\n  decls: 21,\n  vars: 10,\n  consts: [[1, \"form\", 3, \"ngClass\"], [3, \"formGroup\"], [1, \"ip\"], [\"type\", \"text\", \"placeholder\", \"IP do arduino\", \"id\", \"ip\", \"name\", \"ip\", \"formControlName\", \"ip\", 3, \"input\"], [\"src\", \"../../../assets/error.png\", \"class\", \"img-validacao-ip\", 4, \"ngIf\"], [\"src\", \"../../../assets/sucesso.png\", \"class\", \"img-validacao-ip\", 4, \"ngIf\"], [1, \"token\"], [\"type\", \"text\", \"placeholder\", \"Token do Bot\", \"id\", \"token\", \"name\", \"token\", \"formControlName\", \"token\", 3, \"input\"], [\"src\", \"../../../assets/error.png\", \"class\", \"img-validacao-token\", 4, \"ngIf\"], [\"src\", \"../../../assets/sucesso.png\", \"class\", \"img-validacao-token\", 4, \"ngIf\"], [1, \"botao\"], [\"type\", \"reset\", 1, \"recarregar\", 3, \"click\"], [\"type\", \"reset\", 1, \"redefinir\", 3, \"click\"], [\"type\", \"reset\", 1, \"resetar\", 3, \"click\"], [\"src\", \"../../../assets/error.png\", 1, \"img-validacao-ip\"], [\"src\", \"../../../assets/sucesso.png\", 1, \"img-validacao-ip\"], [\"src\", \"../../../assets/error.png\", 1, \"img-validacao-token\"], [\"src\", \"../../../assets/sucesso.png\", 1, \"img-validacao-token\"]],\n  template: function ControleComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"body\")(1, \"div\", 0)(2, \"form\", 1)(3, \"div\", 2)(4, \"input\", 3);\n      i0.ɵɵlistener(\"input\", function ControleComponent_Template_input_input_4_listener() {\n        return ctx.validaIp();\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(5, ControleComponent_img_5_Template, 1, 0, \"img\", 4);\n      i0.ɵɵtemplate(6, ControleComponent_img_6_Template, 1, 0, \"img\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(7, \"br\");\n      i0.ɵɵelementStart(8, \"form\", 1)(9, \"div\", 6)(10, \"input\", 7);\n      i0.ɵɵlistener(\"input\", function ControleComponent_Template_input_input_10_listener() {\n        return ctx.validaToken();\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(11, ControleComponent_img_11_Template, 1, 0, \"img\", 8);\n      i0.ɵɵtemplate(12, ControleComponent_img_12_Template, 1, 0, \"img\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(13, \"br\");\n      i0.ɵɵelementStart(14, \"div\", 10)(15, \"button\", 11);\n      i0.ɵɵlistener(\"click\", function ControleComponent_Template_button_click_15_listener() {\n        return ctx.recarregarInfos();\n      });\n      i0.ɵɵtext(16, \"Recarregar\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"button\", 12);\n      i0.ɵɵlistener(\"click\", function ControleComponent_Template_button_click_17_listener() {\n        return ctx.salvar();\n      });\n      i0.ɵɵtext(18, \"Salvar\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"button\", 13);\n      i0.ɵɵlistener(\"click\", function ControleComponent_Template_button_click_19_listener() {\n        return ctx.restartApi();\n      });\n      i0.ɵɵtext(20, \"Resetar API\");\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      let tmp_2_0;\n      let tmp_3_0;\n      let tmp_5_0;\n      let tmp_6_0;\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(7, _c0, !ctx._apiOnline, ctx._apiOnline));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.formIp);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", (tmp_2_0 = ctx.formIp.get(\"ip\")) == null ? null : tmp_2_0.errors == null ? null : tmp_2_0.errors[\"ipInvalid\"]);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !((tmp_3_0 = ctx.formIp.get(\"ip\")) == null ? null : tmp_3_0.errors == null ? null : tmp_3_0.errors[\"ipInvalid\"]));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"formGroup\", ctx.formToken);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", (tmp_5_0 = ctx.formToken.get(\"token\")) == null ? null : tmp_5_0.errors == null ? null : tmp_5_0.errors[\"tokenInvalid\"]);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !((tmp_6_0 = ctx.formToken.get(\"token\")) == null ? null : tmp_6_0.errors == null ? null : tmp_6_0.errors[\"tokenInvalid\"]));\n    }\n  },\n  dependencies: [i5.NgClass, i5.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.FormGroupDirective, i4.FormControlName],\n  styles: [\"body[_ngcontent-%COMP%] {\\r\\n    background-color: #fff;\\r\\n}\\r\\n.form[_ngcontent-%COMP%]{\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n    align-items: center;\\r\\n    margin-top: 75px;\\r\\n    border: 2px solid gray;\\r\\n    border-radius: 12px;\\r\\n    width: 65%;\\r\\n    margin-left: 15%;\\r\\n    padding: 34px;\\r\\n    background-color: rgb(199, 192, 192);\\r\\n\\tbox-shadow: 4px 4px 4px rgba(50, 50, 50, 0.77);\\r\\n}\\r\\n\\r\\nlabel[_ngcontent-%COMP%] {\\r\\n    display: inline-block;\\r\\n    width: 6em;\\r\\n    text-align: right;\\r\\n    margin-right: 1em;\\r\\n}\\r\\ninput[type=\\\"text\\\"][_ngcontent-%COMP%] {\\r\\n    padding: 0.5em;\\r\\n    margin-bottom: 1em;\\r\\n    width: 50em;\\r\\n    border: 1px solid #ccc;\\r\\n    border-radius: 15px;\\r\\n    color: #686868;\\r\\n}\\r\\nbutton[type=\\\"reset\\\"][_ngcontent-%COMP%] {\\r\\n    padding: 8px;\\r\\n    margin-top: 1em;\\r\\n    color: #fff;\\r\\n    cursor: pointer;\\r\\n    background-color: #5958F9;\\r\\n    border: 1.5px solid rgba(0, 0, 0, 0.74);\\r\\n    border-radius: 12px;\\r\\n    transition: all 0.5s ease;\\r\\n}\\r\\n.redefinir[_ngcontent-%COMP%]:hover, .resetar[_ngcontent-%COMP%]:hover, .recarregar[_ngcontent-%COMP%]:hover{\\r\\n    padding-left: 15px;\\r\\n    padding-right: 15px;\\r\\n}\\r\\n.botao[_ngcontent-%COMP%]{\\r\\n    display: flex;\\r\\n    justify-content: space-between;\\r\\n    width: 50%;\\r\\n}\\r\\n\\r\\n.show[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n}\\r\\n\\r\\n.hide[_ngcontent-%COMP%] {\\r\\n    display: none;\\r\\n}\\r\\n\\r\\n.mensagem__erro[_ngcontent-%COMP%] {\\r\\n    font-size: 12px;\\r\\n    margin-left: 5px;\\r\\n    color: red;\\r\\n    margin-top: -10px;\\r\\n    margin-bottom: 20px;\\r\\n  }\\r\\n\\r\\n.img-validacao-ip[_ngcontent-%COMP%] {\\r\\n    width: 27px;\\r\\n    height: 27px;\\r\\n    position: absolute;\\r\\n    top: 255px;\\r\\n    left: 1033px;\\r\\n}\\r\\n\\r\\n.img-validacao-token[_ngcontent-%COMP%] {\\r\\n    width: 27px;\\r\\n    height: 27px;\\r\\n    position: absolute;\\r\\n    top: 300px;\\r\\n    left: 1033px;\\r\\n}\\r\\n\\r\\n@media (max-width: 600px)\\r\\n{\\r\\n    .ip[_ngcontent-%COMP%], .token[_ngcontent-%COMP%], .botao[_ngcontent-%COMP%] {\\r\\n        display: flex;\\r\\n        align-items: center;\\r\\n    }\\r\\n\\r\\n    form[_ngcontent-%COMP%] {\\r\\n        width: 50%;\\r\\n    }\\r\\n\\r\\n    input[type=\\\"text\\\"][_ngcontent-%COMP%] {\\r\\n        width: 120%;\\r\\n    }\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50ZXMvY29udHJvbGUvY29udHJvbGUuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLHNCQUFzQjtBQUMxQjtBQUNBO0lBQ0ksYUFBYTtJQUNiLHNCQUFzQjtJQUN0QixtQkFBbUI7SUFDbkIsZ0JBQWdCO0lBQ2hCLHNCQUFzQjtJQUN0QixtQkFBbUI7SUFDbkIsVUFBVTtJQUNWLGdCQUFnQjtJQUNoQixhQUFhO0lBQ2Isb0NBQW9DO0NBR3ZDLDhDQUE4QztBQUMvQzs7QUFFQTtJQUNJLHFCQUFxQjtJQUNyQixVQUFVO0lBQ1YsaUJBQWlCO0lBQ2pCLGlCQUFpQjtBQUNyQjtBQUNBO0lBQ0ksY0FBYztJQUNkLGtCQUFrQjtJQUNsQixXQUFXO0lBQ1gsc0JBQXNCO0lBQ3RCLG1CQUFtQjtJQUNuQixjQUFjO0FBQ2xCO0FBQ0E7SUFDSSxZQUFZO0lBQ1osZUFBZTtJQUNmLFdBQVc7SUFDWCxlQUFlO0lBQ2YseUJBQXlCO0lBQ3pCLHVDQUF1QztJQUN2QyxtQkFBbUI7SUFDbkIseUJBQXlCO0FBQzdCO0FBQ0E7SUFDSSxrQkFBa0I7SUFDbEIsbUJBQW1CO0FBQ3ZCO0FBQ0E7SUFDSSxhQUFhO0lBQ2IsOEJBQThCO0lBQzlCLFVBQVU7QUFDZDs7QUFFQTtJQUNJLGFBQWE7QUFDakI7O0FBRUE7SUFDSSxhQUFhO0FBQ2pCOztBQUVBO0lBQ0ksZUFBZTtJQUNmLGdCQUFnQjtJQUNoQixVQUFVO0lBQ1YsaUJBQWlCO0lBQ2pCLG1CQUFtQjtFQUNyQjs7QUFFRjtJQUNJLFdBQVc7SUFDWCxZQUFZO0lBQ1osa0JBQWtCO0lBQ2xCLFVBQVU7SUFDVixZQUFZO0FBQ2hCOztBQUVBO0lBQ0ksV0FBVztJQUNYLFlBQVk7SUFDWixrQkFBa0I7SUFDbEIsVUFBVTtJQUNWLFlBQVk7QUFDaEI7O0FBRUE7O0lBRUk7UUFDSSxhQUFhO1FBQ2IsbUJBQW1CO0lBQ3ZCOztJQUVBO1FBQ0ksVUFBVTtJQUNkOztJQUVBO1FBQ0ksV0FBVztJQUNmO0FBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyJib2R5IHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XHJcbn1cclxuLmZvcm17XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICBtYXJnaW4tdG9wOiA3NXB4O1xyXG4gICAgYm9yZGVyOiAycHggc29saWQgZ3JheTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XHJcbiAgICB3aWR0aDogNjUlO1xyXG4gICAgbWFyZ2luLWxlZnQ6IDE1JTtcclxuICAgIHBhZGRpbmc6IDM0cHg7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMTk5LCAxOTIsIDE5Mik7XHJcbiAgICAtd2Via2l0LWJveC1zaGFkb3c6IDRweCA0cHggNHB4IHJnYmEoNTAsIDUwLCA1MCwgMC43Nyk7XHJcblx0LW1vei1ib3gtc2hhZG93OiA0cHggNHB4IDRweCByZ2JhKDUwLCA1MCwgNTAsIDAuNzcpO1xyXG5cdGJveC1zaGFkb3c6IDRweCA0cHggNHB4IHJnYmEoNTAsIDUwLCA1MCwgMC43Nyk7XHJcbn1cclxuXHJcbmxhYmVsIHtcclxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICAgIHdpZHRoOiA2ZW07XHJcbiAgICB0ZXh0LWFsaWduOiByaWdodDtcclxuICAgIG1hcmdpbi1yaWdodDogMWVtO1xyXG59XHJcbmlucHV0W3R5cGU9XCJ0ZXh0XCJdIHtcclxuICAgIHBhZGRpbmc6IDAuNWVtO1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMWVtO1xyXG4gICAgd2lkdGg6IDUwZW07XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xyXG4gICAgYm9yZGVyLXJhZGl1czogMTVweDtcclxuICAgIGNvbG9yOiAjNjg2ODY4O1xyXG59XHJcbmJ1dHRvblt0eXBlPVwicmVzZXRcIl0ge1xyXG4gICAgcGFkZGluZzogOHB4O1xyXG4gICAgbWFyZ2luLXRvcDogMWVtO1xyXG4gICAgY29sb3I6ICNmZmY7XHJcbiAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNTk1OEY5O1xyXG4gICAgYm9yZGVyOiAxLjVweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuNzQpO1xyXG4gICAgYm9yZGVyLXJhZGl1czogMTJweDtcclxuICAgIHRyYW5zaXRpb246IGFsbCAwLjVzIGVhc2U7XHJcbn1cclxuLnJlZGVmaW5pcjpob3ZlciwgLnJlc2V0YXI6aG92ZXIsIC5yZWNhcnJlZ2FyOmhvdmVye1xyXG4gICAgcGFkZGluZy1sZWZ0OiAxNXB4O1xyXG4gICAgcGFkZGluZy1yaWdodDogMTVweDtcclxufVxyXG4uYm90YW97XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG4gICAgd2lkdGg6IDUwJTtcclxufVxyXG5cclxuLnNob3cge1xyXG4gICAgZGlzcGxheTogZmxleDtcclxufVxyXG5cclxuLmhpZGUge1xyXG4gICAgZGlzcGxheTogbm9uZTtcclxufVxyXG5cclxuLm1lbnNhZ2VtX19lcnJvIHtcclxuICAgIGZvbnQtc2l6ZTogMTJweDtcclxuICAgIG1hcmdpbi1sZWZ0OiA1cHg7XHJcbiAgICBjb2xvcjogcmVkO1xyXG4gICAgbWFyZ2luLXRvcDogLTEwcHg7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xyXG4gIH1cclxuXHJcbi5pbWctdmFsaWRhY2FvLWlwIHtcclxuICAgIHdpZHRoOiAyN3B4O1xyXG4gICAgaGVpZ2h0OiAyN3B4O1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgdG9wOiAyNTVweDtcclxuICAgIGxlZnQ6IDEwMzNweDtcclxufVxyXG5cclxuLmltZy12YWxpZGFjYW8tdG9rZW4ge1xyXG4gICAgd2lkdGg6IDI3cHg7XHJcbiAgICBoZWlnaHQ6IDI3cHg7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICB0b3A6IDMwMHB4O1xyXG4gICAgbGVmdDogMTAzM3B4O1xyXG59XHJcblxyXG5AbWVkaWEgKG1heC13aWR0aDogNjAwcHgpXHJcbntcclxuICAgIC5pcCwgLnRva2VuLCAuYm90YW8ge1xyXG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgIH1cclxuXHJcbiAgICBmb3JtIHtcclxuICAgICAgICB3aWR0aDogNTAlO1xyXG4gICAgfVxyXG5cclxuICAgIGlucHV0W3R5cGU9XCJ0ZXh0XCJdIHtcclxuICAgICAgICB3aWR0aDogMTIwJTtcclxuICAgIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["timeout","i0","ControleComponent","constructor","apiService","arduinoService","tokenService","formBuilder","ngAfterViewInit","recarregarInfos","ngOnInit","formIp","group","ip","formToken","token","apiOnline","value","_apiOnline","restartApi","restart","subscribe","getToken","tokenResponse","setValue","getIp","ipResponse","validaIp","controls","setErrors","getIpValido","pipe","complete","error","validaToken","getValidacaoToken","salvar","get","errors","setIp","valid","setToken","selectors","inputs","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\git\\front api telegram\\APITelegramFront\\src\\app\\componentes\\controle\\controle.component.ts","C:\\git\\front api telegram\\APITelegramFront\\src\\app\\componentes\\controle\\controle.component.html"],"sourcesContent":["import { AfterViewInit, Component, Input, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { ApiServiceService } from 'src/app/service/api-service.service';\r\nimport { Token } from '../token';\r\nimport { Ip } from '../ip';\r\nimport { ArduinoService } from 'src/app/service/arduino.service';\r\nimport { timeout } from 'rxjs';\r\nimport { TokenServiceService } from 'src/app/service/token-service.service';\r\n\r\n@Component({\r\n  selector: 'app-controle',\r\n  templateUrl: './controle.component.html',\r\n  styleUrls: ['./controle.component.css']\r\n})\r\nexport class ControleComponent implements OnInit, AfterViewInit {\r\n\r\n  _apiOnline!: boolean;\r\n  formIp!: FormGroup;\r\n  formToken!: FormGroup;\r\n\r\n  ip: string = \"\";\r\n\r\n  constructor(private apiService: ApiServiceService,\r\n    private arduinoService: ArduinoService,\r\n    private tokenService: TokenServiceService,\r\n    private formBuilder: FormBuilder) { }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.recarregarInfos();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.formIp = this.formBuilder.group({\r\n      ip: ['']\r\n    })\r\n\r\n    this.formToken = this.formBuilder.group({\r\n      token: ['']\r\n    })\r\n  }\r\n\r\n\r\n  @Input() set apiOnline(value: boolean) {\r\n    this._apiOnline = value;\r\n\r\n    if (this._apiOnline) {\r\n      this.recarregarInfos();\r\n    }\r\n  }\r\n\r\n  public restartApi() {\r\n    this.apiService.restart().subscribe();\r\n  }\r\n\r\n  recarregarInfos() {\r\n    this.apiService.getToken().subscribe((tokenResponse: Token) => {\r\n      this.formToken.setValue({\r\n        token: tokenResponse.token\r\n      })\r\n    })\r\n\r\n    this.apiService.getIp().subscribe((ipResponse: Ip) => {\r\n      this.formIp.setValue({\r\n        ip: ipResponse.ip\r\n      })\r\n\r\n      this.validaIp();\r\n      //this.validaToken();\r\n    }\r\n    )\r\n  }\r\n\r\n  validaIp() {\r\n    this.formIp.controls['ip'].setErrors({ 'ipInvalid': true })\r\n    this.arduinoService.getIpValido(this.formIp.controls['ip'].value\r\n    ).pipe(timeout(100)).subscribe({\r\n      complete: () => {\r\n        this.formIp.controls['ip'].setErrors({ 'ipInvalid': false })\r\n      },\r\n      error: () => {\r\n        this.formIp.controls['ip'].setErrors({ 'ipInvalid': true })\r\n      }\r\n    })\r\n  }\r\n\r\n  validaToken() {\r\n    this.formToken.controls['token'].setErrors({ 'tokenInvalid': true })\r\n\r\n    this.tokenService.getValidacaoToken(this.formToken.controls['token'].value\r\n    ).pipe(timeout(5000)).subscribe({\r\n      complete: () => {\r\n        this.formToken.controls['token'].setErrors({ 'tokenInvalid': false })\r\n      },\r\n      error: () => {\r\n        this.formToken.controls['token'].setErrors({ 'tokenInvalid': true })\r\n      }\r\n    })\r\n  }\r\n\r\n  salvar() {\r\n    if (!this.formIp.get('ip')?.errors?.['ipInvalid']) {\r\n      this.apiService.setIp({\r\n        \"ip\": this.formIp.controls['ip'].value\r\n      }).subscribe();\r\n    }\r\n\r\n    if (!this.formToken.get('token')?.valid) {\r\n      this.apiService.setToken({\r\n        \"token\": this.formToken.controls['token'].value\r\n      }).subscribe();\r\n    }\r\n  }\r\n}\r\n","<body>\r\n    <div [ngClass]=\"{'hide':!_apiOnline, 'show':_apiOnline}\" class=\"form\">\r\n        <form [formGroup]=\"formIp\">\r\n            <div class=\"ip\">\r\n                <input (input)=\"validaIp()\" type=\"text\" placeholder=\"IP do arduino\" id=\"ip\" name=\"ip\" formControlName=\"ip\">\r\n            </div> \r\n            <img src=\"../../../assets/error.png\" class=\"img-validacao-ip\" *ngIf=\"formIp.get('ip')?.errors?.['ipInvalid']\">\r\n            <img src=\"../../../assets/sucesso.png\" class=\"img-validacao-ip\" *ngIf=\"!formIp.get('ip')?.errors?.['ipInvalid']\">\r\n        </form>\r\n            <br>\r\n        <form [formGroup]=\"formToken\">\r\n            <div class=\"token\">\r\n                <input type=\"text\" (input)=\"validaToken()\" placeholder=\"Token do Bot\" id=\"token\" name=\"token\" formControlName=\"token\">\r\n            </div>\r\n            <img src=\"../../../assets/error.png\" class=\"img-validacao-token\" *ngIf=\"formToken.get('token')?.errors?.['tokenInvalid']\">\r\n            <img src=\"../../../assets/sucesso.png\" class=\"img-validacao-token\" *ngIf=\"!formToken.get('token')?.errors?.['tokenInvalid']\">\r\n        </form>\r\n            <br>\r\n            <div class=\"botao\">\r\n                <button (click)=\"recarregarInfos()\" type=\"reset\" class=\"recarregar\">Recarregar</button>\r\n                <button (click)=\"salvar()\" type=\"reset\" class=\"redefinir\">Salvar</button>\r\n                <button (click)=\"restartApi()\" type=\"reset\" class=\"resetar\">Resetar API</button>\r\n            </div>\r\n    </div>\r\n</body>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}